## Программное обеспечение вычислительного кластера

Для удобства использования данного программного обеспечениея на кластере развернута система модулей (команда `module`, пакет `LMod`), которая позволяет настроить сеанс работы пользователя на некоторую группу необходимого ПО.

Для вывода доступного через систему модулей ПО используется команда `module available` или сокращенно `ml av`. Пример вывода:
```bash
[user@master ~]$ ml av

---------------------------------------- /opt/ohpc/pub/moduledeps/gnu9-openmpi4 ----------------------------------------
   boost/1.73.0    py3-mpi4py/3.0.3    py3-scipy/1.5.1

-------------------------------------------- /opt/ohpc/pub/moduledeps/gnu9 ---------------------------------------------
   gsl/2.6    mpich/3.3.2-ucx    openblas/0.3.7    openmpi4/4.0.4 (L,D)    openmpi4/4.1.0    py3-numpy/1.19.0

---------------------------------------------- /opt/ohpc/pub/modulefiles -----------------------------------------------
   EasyBuild/4.3.0        cmake/3.16.2    gnu9/9.3.0  (L)    libfabric/1.10.1 (L)    os            prun/2.0  (L)
   autotools       (L)    cuda/11.2.1     hwloc/2.1.0        ohpc             (L)    pmix/3.1.4    ucx/1.8.0 (L)

  Where:
   D:  Default Module
   L:  Module is loaded
```

Настройка сеанса пользователя на работу конкретным пакетом осуществляется командой `module load`:
```bash
[user@master ~]$ ml load boost
```
Если для модуля доступно сразу несколько версий, по умолчанию загружается либо самая новая, либо помеченная буквой `D` в списке модулей. Для загрузки конкретной версии ПО необходимо указать её через `/`, например:
```bash
[user@master ~]$ ml load openmpi4/4.1.0
```

Команда `module load` встраивает в сеанс пользователя необходимые переменные среды (дополняет значения этих переменных), которые помогают системе находить исполняемые и другие вспомогательные файлы, относящиеся к данному пакету. Чаще всего настраиваются такие переменные, как

- `PATH` - пути поиск исполняемых файлов;
- `LD_LIBRARY_PATH` - пути поиска подгружаемых библиотек;
- `PKG_CONFIG_DATA` - пути поиска конфигурационных файлов пакетов для pkgconfig.

Список текущих загруженных модулей пользователя можно посмотреть с помощью команды `module list`. При входе на кластер всем пользователям загружается рекомендованная версия `openmpi` и набор инструментов `gnu9`.

## Специфичные программные пакеты

### OpenFOAM

Есть две реализации: от openfoam.com и openfoam.org

OpenFOAM (.com) доступен по адресу `/opt/soft/openfoam`.
Настроить переменные окружения можно командой:
```
source /opt/soft/openfoam/OpenFOAM-v2012/etc/bashrc
```

OpenFOAM (.org) доступен по адресу `/opt/soft/openfoam.org`.
Настроить переменные окружения можно командой:
```
source /opt/soft/openfoam/OpenFOAM-8/etc/bashrc
```

<!---
### Paraview

Paraview доступен в виде клиент-серверного приложения. Принцип работы заключается в том, что на кластере запускается серверная часть (`pvserver`), отвечающая за отрисовку графики, а на компьютере пользователя установлена клиентская часть (`paraview`), которая является графическим интерфейсом и визуализирует полученные данные.

Серверная часть открывает TCP-порт для принятия входящих подключений, и этот порт транслируется на компьютер пользователя по протоколу SSH. По умолчанию `pvserver` открывает порт 11111. На кластере один порт может быть открыт только одной программой, и при запуске двух серверов на одном порту paraview выдаст ошибку. Поэтому пользователю рекомендуется придумать своё 4-6 значное число и постоянно использовать его в качестве порта. Например: 18945. Далее вместо порта будет указано `XXXX`.

1. Запускаем pvserver
Если Ваша визуализация не требует вычислительных мощностей и может быть
-->